<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bitcoin Miner Pro</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #f7931a;
    --gold2: #ffb347;
    --dark: #0a0a0f;
    --darker: #050508;
    --panel: #0d1117;
    --border: #1a2332;
    --green: #00ff88;
    --blue: #00aaff;
    --red: #ff3333;
    --text: #c8d6e5;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--darker);
    color: var(--text);
    font-family: 'Share Tech Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Animated grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(247,147,26,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(247,147,26,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 1100px;
    margin: 0 auto;
    padding: 20px;
  }

  /* Header */
  header {
    text-align: center;
    padding: 30px 0 20px;
    position: relative;
  }

  .logo {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(28px, 5vw, 52px);
    font-weight: 900;
    background: linear-gradient(135deg, var(--gold), var(--gold2), #fff8e0, var(--gold));
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: none;
    letter-spacing: 4px;
    animation: shimmer 3s ease-in-out infinite;
  }

  @keyframes shimmer {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.3); }
  }

  .subtitle {
    color: var(--gold);
    font-size: 12px;
    letter-spacing: 6px;
    margin-top: 6px;
    opacity: 0.7;
  }

  /* BTC Balance */
  .balance-card {
    background: linear-gradient(135deg, #0d1117 0%, #111827 100%);
    border: 1px solid var(--gold);
    border-radius: 16px;
    padding: 24px 32px;
    margin: 20px 0;
    text-align: center;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 40px rgba(247,147,26,0.15), inset 0 0 40px rgba(247,147,26,0.03);
  }

  .balance-card::before {
    content: '‚Çø';
    position: absolute;
    right: -10px;
    top: -20px;
    font-size: 130px;
    color: rgba(247,147,26,0.05);
    font-family: 'Orbitron', sans-serif;
    pointer-events: none;
  }

  .balance-label {
    font-size: 11px;
    letter-spacing: 4px;
    color: var(--gold);
    margin-bottom: 8px;
    opacity: 0.8;
  }

  .balance-amount {
    font-family: 'Orbitron', sans-serif;
    font-size: clamp(36px, 6vw, 64px);
    font-weight: 900;
    color: #fff;
    line-height: 1;
  }

  .balance-amount span {
    color: var(--gold);
  }

  .usd-value {
    margin-top: 8px;
    font-size: 14px;
    color: var(--green);
    opacity: 0.8;
  }

  /* Stats row */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 20px;
  }

  .stat-card {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    text-align: center;
    transition: border-color 0.3s;
  }

  .stat-card:hover { border-color: var(--gold); }

  .stat-label {
    font-size: 10px;
    letter-spacing: 3px;
    color: #556;
    margin-bottom: 6px;
  }

  .stat-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: var(--gold2);
  }

  .stat-value.green { color: var(--green); }
  .stat-value.blue { color: var(--blue); }

  /* Main grid */
  .main-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 20px;
  }

  @media (max-width: 650px) { .main-grid { grid-template-columns: 1fr; } .stats-row { grid-template-columns: repeat(3,1fr); } }

  /* Mine button */
  .mine-section {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }

  .section-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 13px;
    letter-spacing: 3px;
    color: var(--gold);
    margin-bottom: 4px;
    width: 100%;
  }

  .mine-btn {
    width: 160px;
    height: 160px;
    border-radius: 50%;
    border: 3px solid var(--gold);
    background: radial-gradient(circle at 35% 35%, #2a1500, #0d0700);
    cursor: pointer;
    position: relative;
    transition: transform 0.1s, box-shadow 0.3s;
    box-shadow: 0 0 30px rgba(247,147,26,0.3), inset 0 0 20px rgba(247,147,26,0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--gold);
    font-family: 'Orbitron', sans-serif;
    font-size: 42px;
    user-select: none;
    -webkit-user-select: none;
  }

  .mine-btn:hover {
    box-shadow: 0 0 50px rgba(247,147,26,0.6), inset 0 0 30px rgba(247,147,26,0.2);
  }

  .mine-btn:active {
    transform: scale(0.93);
    box-shadow: 0 0 80px rgba(247,147,26,0.9), inset 0 0 40px rgba(247,147,26,0.4);
  }

  .mine-btn-label {
    font-size: 10px;
    letter-spacing: 2px;
    margin-top: 4px;
    color: var(--gold2);
  }

  /* Mining animation rings */
  .mine-ring {
    position: absolute;
    border-radius: 50%;
    border: 1px solid var(--gold);
    opacity: 0;
    animation: ring-out 1s ease-out;
    pointer-events: none;
  }

  @keyframes ring-out {
    0% { width: 160px; height: 160px; opacity: 0.8; transform: translate(-50%,-50%) scale(1); }
    100% { width: 320px; height: 320px; opacity: 0; transform: translate(-50%,-50%) scale(1); }
  }

  .progress-bar-wrap {
    width: 100%;
    background: #111;
    border-radius: 99px;
    height: 10px;
    border: 1px solid var(--border);
    overflow: hidden;
  }

  .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--gold2));
    border-radius: 99px;
    transition: width 0.3s;
    box-shadow: 0 0 10px var(--gold);
  }

  .progress-label {
    font-size: 11px;
    color: #556;
    width: 100%;
    display: flex;
    justify-content: space-between;
  }

  /* Upgrades */
  .upgrades-section {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
  }

  .upgrade-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 12px;
    max-height: 320px;
    overflow-y: auto;
  }

  .upgrade-list::-webkit-scrollbar { width: 4px; }
  .upgrade-list::-webkit-scrollbar-track { background: transparent; }
  .upgrade-list::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 4px; }

  .upgrade-btn {
    background: rgba(247,147,26,0.05);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px 14px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: space-between;
    text-align: left;
    color: var(--text);
    font-family: 'Share Tech Mono', monospace;
  }

  .upgrade-btn:hover:not(:disabled) {
    border-color: var(--gold);
    background: rgba(247,147,26,0.1);
    transform: translateX(4px);
  }

  .upgrade-btn:disabled {
    opacity: 0.35;
    cursor: not-allowed;
  }

  .upgrade-btn.bought {
    border-color: var(--green);
    background: rgba(0,255,136,0.05);
  }

  .upg-left { display: flex; flex-direction: column; gap: 3px; }
  .upg-name { font-size: 13px; font-weight: 700; color: #fff; }
  .upg-desc { font-size: 10px; color: #556; }
  .upg-price {
    font-family: 'Orbitron', sans-serif;
    font-size: 12px;
    color: var(--gold);
    white-space: nowrap;
    text-align: right;
  }

  .upg-count {
    font-size: 10px;
    color: var(--green);
    margin-top: 2px;
    text-align: right;
  }

  /* Auto-mine section */
  .auto-section {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px 24px;
    margin-bottom: 20px;
  }

  .miner-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 10px;
    margin-top: 12px;
  }

  .miner-card {
    background: #0a0d14;
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px;
    transition: all 0.2s;
    cursor: pointer;
  }

  .miner-card:hover:not(.disabled) {
    border-color: var(--blue);
    transform: translateY(-2px);
  }

  .miner-card.disabled { opacity: 0.3; cursor: not-allowed; }

  .miner-icon { font-size: 28px; margin-bottom: 4px; }
  .miner-name { font-size: 12px; font-weight: 700; color: #fff; }
  .miner-rate { font-size: 10px; color: var(--green); margin: 3px 0; }
  .miner-price-tag { font-family: 'Orbitron', sans-serif; font-size: 11px; color: var(--gold); }
  .miner-owned { font-size: 10px; color: var(--blue); }

  /* Log */
  .log-section {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px 24px;
  }

  .log-box {
    height: 120px;
    overflow-y: auto;
    margin-top: 10px;
    font-size: 11px;
    color: #445;
    line-height: 1.8;
  }

  .log-box::-webkit-scrollbar { width: 4px; }
  .log-box::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

  .log-entry { color: var(--green); animation: fadeIn 0.3s; }
  .log-entry.warn { color: var(--gold); }
  .log-entry.info { color: var(--blue); }

  @keyframes fadeIn { from { opacity: 0; transform: translateY(-4px); } to { opacity: 1; transform: none; } }

  /* Floating +BTC particles */
  .particle {
    position: fixed;
    font-family: 'Orbitron', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--gold);
    pointer-events: none;
    animation: float-up 1.2s ease-out forwards;
    z-index: 999;
    text-shadow: 0 0 10px var(--gold);
  }

  @keyframes float-up {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-80px) scale(1.5); }
  }

  /* Pulse animation on auto-mine */
  @keyframes pulse-gold {
    0%, 100% { box-shadow: 0 0 5px rgba(247,147,26,0.3); }
    50% { box-shadow: 0 0 20px rgba(247,147,26,0.8); }
  }

  .mining-active { animation: pulse-gold 2s infinite; }

  /* Prestige */
  .prestige-btn {
    display: block;
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, #1a0a2e, #0d0717);
    border: 1px solid #7928ca;
    border-radius: 12px;
    color: #c77dff;
    font-family: 'Orbitron', sans-serif;
    font-size: 13px;
    letter-spacing: 2px;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 16px;
    text-align: center;
  }

  .prestige-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #2d1054, #1a0a2e);
    box-shadow: 0 0 30px rgba(121,40,202,0.5);
  }

  .prestige-btn:disabled { opacity: 0.3; cursor: not-allowed; }
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo">‚Çø BITCOIN MINER PRO</div>
    <div class="subtitle">MINA ¬∑ GUADAGNA ¬∑ DOMINA IL MERCATO</div>
  </header>

  <!-- Balance -->
  <div class="balance-card" id="balanceCard">
    <div class="balance-label">PORTAFOGLIO BITCOIN</div>
    <div class="balance-amount"><span>‚Çø</span> <span id="btcDisplay">0.00000000</span></div>
    <div class="usd-value" id="usdDisplay">‚âà $0.00 USD</div>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-label">HASHRATE</div>
      <div class="stat-value blue" id="hashrateDisplay">0 H/s</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">BTC/SEC AUTO</div>
      <div class="stat-value green" id="autoDisplay">0.000000</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">CLICK POWER</div>
      <div class="stat-value" id="clickDisplay">0.0001</div>
    </div>
  </div>

  <!-- Main grid: Mine + Upgrades -->
  <div class="main-grid">
    <!-- Mine -->
    <div class="mine-section">
      <div class="section-title">‚õè MINING MANUALE</div>
      <div style="position:relative">
        <button class="mine-btn" id="mineBtn" onclick="mine(event)">
          ‚Çø
          <div class="mine-btn-label">MINE</div>
        </button>
      </div>
      <div class="progress-label">
        <span>Prossimo blocco</span>
        <span id="blockLabel">0 / 100</span>
      </div>
      <div class="progress-bar-wrap">
        <div class="progress-bar" id="progressBar" style="width:0%"></div>
      </div>
      <div style="font-size:11px; color:#445; text-align:center">Blocchi minati: <span id="blocksMined" style="color:var(--gold)">0</span></div>

      <button class="prestige-btn" id="prestigeBtn" disabled onclick="prestige()">
        ‚ú¶ PRESTIGE ‚Äî Reset &amp; Bonus √ó2 ‚ú¶
      </button>
    </div>

    <!-- Upgrades -->
    <div class="upgrades-section">
      <div class="section-title">üîß POTENZIAMENTI CLICK</div>
      <div class="upgrade-list" id="upgradeList"></div>
    </div>
  </div>

  <!-- Auto miners -->
  <div class="auto-section">
    <div class="section-title">üñ• FARM DI MINING AUTOMATICO</div>
    <div class="miner-list" id="minerList"></div>
  </div>

  <!-- Log -->
  <div class="log-section">
    <div class="section-title">üì° BLOCKCHAIN LOG</div>
    <div class="log-box" id="logBox"></div>
  </div>
</div>

<script>
const BTC_PRICE = 95000; // USD per BTC (simulated)

// Game state
let state = {
  btc: 0,
  clickPower: 0.00010000,
  autoRate: 0,
  hashrate: 0,
  blockProgress: 0,
  blocksMined: 0,
  prestigeMulti: 1,
  totalClicks: 0,
};

// Upgrades (click power)
const UPGRADES = [
  { id:'u1', name:'Scheda Grafica GTX', desc:'+0.00005 BTC/click', cost:0.001, bonus:0.00005, count:0, max:10 },
  { id:'u2', name:'ASIC Miner S9', desc:'+0.0002 BTC/click', cost:0.005, bonus:0.0002, count:0, max:5 },
  { id:'u3', name:'Mining Rig Pro', desc:'+0.001 BTC/click', cost:0.02, bonus:0.001, count:0, max:5 },
  { id:'u4', name:'Server Farm', desc:'+0.005 BTC/click', cost:0.1, bonus:0.005, count:0, max:3 },
  { id:'u5', name:'Quantum ASIC', desc:'+0.02 BTC/click', cost:0.5, bonus:0.02, count:0, max:3 },
  { id:'u6', name:'Neural Miner AI', desc:'+0.1 BTC/click', cost:2, bonus:0.1, count:0, max:2 },
  { id:'u7', name:'Satellite Array', desc:'+0.5 BTC/click', cost:10, bonus:0.5, count:0, max:2 },
  { id:'u8', name:'Dark Matter Core', desc:'+2 BTC/click', cost:50, bonus:2, count:0, max:1 },
];

// Auto miners
const MINERS = [
  { id:'m1', icon:'üíª', name:'Laptop Mining', rate:0.000005, cost:0.0005, owned:0 },
  { id:'m2', icon:'üñ•', name:'PC Gaming', rate:0.00003, cost:0.003, owned:0 },
  { id:'m3', icon:'‚ö°', name:'ASIC Ant S19', rate:0.0002, cost:0.02, owned:0 },
  { id:'m4', icon:'üè≠', name:'Data Center', rate:0.001, cost:0.1, owned:0 },
  { id:'m5', icon:'üõ∏', name:'Quantum Farm', rate:0.005, cost:0.5, owned:0 },
  { id:'m6', icon:'üåê', name:'Blockchain Node', rate:0.02, cost:2, owned:0 },
  { id:'m7', icon:'üöÄ', name:'Orbital Rig', rate:0.1, cost:10, owned:0 },
  { id:'m8', icon:'üîÆ', name:'AI Singularity', rate:0.5, cost:50, owned:0 },
];

function formatBTC(n) {
  if (n >= 1000) return n.toFixed(2);
  if (n >= 1) return n.toFixed(4);
  return n.toFixed(8);
}

function formatUSD(btc) {
  const usd = btc * BTC_PRICE * state.prestigeMulti;
  if (usd >= 1e9) return `$${(usd/1e9).toFixed(2)}B`;
  if (usd >= 1e6) return `$${(usd/1e6).toFixed(2)}M`;
  if (usd >= 1e3) return `$${(usd/1e3).toFixed(2)}K`;
  return `$${usd.toFixed(2)}`;
}

function formatHashrate(h) {
  if (h >= 1e12) return `${(h/1e12).toFixed(1)} TH/s`;
  if (h >= 1e9) return `${(h/1e9).toFixed(1)} GH/s`;
  if (h >= 1e6) return `${(h/1e6).toFixed(1)} MH/s`;
  if (h >= 1e3) return `${(h/1e3).toFixed(1)} KH/s`;
  return `${h.toFixed(0)} H/s`;
}

function recalc() {
  // click power
  let cp = 0.0001;
  UPGRADES.forEach(u => { cp += u.bonus * u.count; });
  state.clickPower = cp * state.prestigeMulti;

  // auto rate
  let ar = 0;
  MINERS.forEach(m => { ar += m.rate * m.owned; });
  state.autoRate = ar * state.prestigeMulti;

  // hashrate (cosmetic)
  state.hashrate = (state.clickPower * 1e6 + state.autoRate * 1e9) * state.prestigeMulti;

  updateUI();
}

function updateUI() {
  document.getElementById('btcDisplay').textContent = formatBTC(state.btc);
  document.getElementById('usdDisplay').textContent = `‚âà ${formatUSD(state.btc)} USD`;
  document.getElementById('hashrateDisplay').textContent = formatHashrate(state.hashrate);
  document.getElementById('autoDisplay').textContent = formatBTC(state.autoRate) + ' ‚Çø/s';
  document.getElementById('clickDisplay').textContent = formatBTC(state.clickPower);
  document.getElementById('blocksMined').textContent = state.blocksMined;
  document.getElementById('blockLabel').textContent = `${Math.floor(state.blockProgress)} / 100`;
  document.getElementById('progressBar').style.width = `${state.blockProgress}%`;

  // Prestige button
  document.getElementById('prestigeBtn').disabled = state.btc < 10;

  // Upgrades
  UPGRADES.forEach(u => {
    const btn = document.getElementById('upg_' + u.id);
    if (!btn) return;
    btn.disabled = state.btc < u.cost || u.count >= u.max;
    if (u.count >= u.max) btn.classList.add('bought');
    btn.querySelector('.upg-price').textContent = `‚Çø ${formatBTC(u.cost)}`;
    btn.querySelector('.upg-count').textContent = u.count >= u.max ? '‚úì MAX' : `Acquistati: ${u.count}/${u.max}`;
  });

  // Miners
  MINERS.forEach(m => {
    const card = document.getElementById('miner_' + m.id);
    if (!card) return;
    const canBuy = state.btc >= m.cost;
    card.classList.toggle('disabled', !canBuy);
    card.querySelector('.miner-owned').textContent = `Posseduti: ${m.owned}`;
    card.querySelector('.miner-price-tag').textContent = `‚Çø ${formatBTC(m.cost)}`;
  });
}

function mine(e) {
  const earned = state.clickPower;
  state.btc += earned;
  state.totalClicks++;

  // Block progress
  state.blockProgress += earned * 1000;
  if (state.blockProgress >= 100) {
    state.blockProgress -= 100;
    state.blocksMined++;
    addLog(`‚õè Blocco #${state.blocksMined} completato! +${formatBTC(0.0006250)} ‚Çø bonus`, 'warn');
    state.btc += 0.000625;
  }

  // Particle
  if (e) spawnParticle(e.clientX, e.clientY, `+‚Çø${formatBTC(earned)}`);

  if (state.totalClicks % 50 === 0) addLog(`üñ± ${state.totalClicks} click totali! Hashrate: ${formatHashrate(state.hashrate)}`);

  updateUI();
}

function buyUpgrade(id) {
  const u = UPGRADES.find(x => x.id === id);
  if (!u || state.btc < u.cost || u.count >= u.max) return;
  state.btc -= u.cost;
  u.count++;
  u.cost = Math.round(u.cost * 3 * 100) / 100;
  addLog(`‚úÖ Acquistato: ${u.name}`, 'info');
  recalc();
}

function buyMiner(id) {
  const m = MINERS.find(x => x.id === id);
  if (!m || state.btc < m.cost) return;
  state.btc -= m.cost;
  m.owned++;
  m.cost = Math.round(m.cost * 1.15 * 1e8) / 1e8;
  addLog(`üñ• Acquistato: ${m.name} (posseduti: ${m.owned})`, 'info');
  recalc();
}

function prestige() {
  if (state.btc < 10) return;
  if (!confirm('‚ö†Ô∏è Il prestige azzera tutto ma raddoppia il tuo potere per sempre. Continuare?')) return;
  state.prestigeMulti *= 2;
  state.btc = 0;
  state.blockProgress = 0;
  state.blocksMined = 0;
  UPGRADES.forEach(u => { u.count = 0; u.cost = [0.001,0.005,0.02,0.1,0.5,2,10,50][UPGRADES.indexOf(u)]; });
  MINERS.forEach(m => { m.owned = 0; m.cost = [0.0005,0.003,0.02,0.1,0.5,2,10,50][MINERS.indexOf(m)]; });
  addLog(`‚ú¶ PRESTIGE! Moltiplicatore ora √ó${state.prestigeMulti}`, 'warn');
  recalc();
}

function spawnParticle(x, y, text) {
  const el = document.createElement('div');
  el.className = 'particle';
  el.textContent = text;
  el.style.left = (x - 30 + Math.random()*40) + 'px';
  el.style.top = (y - 20) + 'px';
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 1200);
}

function addLog(msg, type = '') {
  const box = document.getElementById('logBox');
  const d = document.createElement('div');
  d.className = 'log-entry ' + type;
  const now = new Date();
  d.textContent = `[${now.toLocaleTimeString('it-IT')}] ${msg}`;
  box.insertBefore(d, box.firstChild);
  if (box.children.length > 30) box.lastChild.remove();
}

// Build upgrade buttons
function buildUpgradeList() {
  const list = document.getElementById('upgradeList');
  UPGRADES.forEach(u => {
    const btn = document.createElement('button');
    btn.className = 'upgrade-btn';
    btn.id = 'upg_' + u.id;
    btn.onclick = () => buyUpgrade(u.id);
    btn.innerHTML = `
      <div class="upg-left">
        <div class="upg-name">${u.name}</div>
        <div class="upg-desc">${u.desc}</div>
      </div>
      <div>
        <div class="upg-price">‚Çø ${formatBTC(u.cost)}</div>
        <div class="upg-count">Acquistati: 0/${u.max}</div>
      </div>`;
    list.appendChild(btn);
  });
}

// Build miner cards
function buildMinerList() {
  const list = document.getElementById('minerList');
  MINERS.forEach(m => {
    const card = document.createElement('div');
    card.className = 'miner-card disabled';
    card.id = 'miner_' + m.id;
    card.onclick = () => buyMiner(m.id);
    card.innerHTML = `
      <div class="miner-icon">${m.icon}</div>
      <div class="miner-name">${m.name}</div>
      <div class="miner-rate">+${formatBTC(m.rate)} ‚Çø/s</div>
      <div class="miner-price-tag">‚Çø ${formatBTC(m.cost)}</div>
      <div class="miner-owned">Posseduti: 0</div>`;
    list.appendChild(card);
  });
}

// Auto-mine tick (every 100ms)
setInterval(() => {
  if (state.autoRate > 0) {
    const earned = state.autoRate * 0.1;
    state.btc += earned;
    state.blockProgress += earned * 1000;
    if (state.blockProgress >= 100) {
      state.blockProgress -= 100;
      state.blocksMined++;
      addLog(`‚õè Blocco #${state.blocksMined} completato automaticamente! +0.000625 ‚Çø`, 'warn');
      state.btc += 0.000625;
    }
  }
  updateUI();
}, 100);

// Random market events
setInterval(() => {
  const events = [
    'üìà Bitcoin sale del 5%! Il mercato √® bullish!',
    'üìâ Correzione del mercato... HODLers reggono duro.',
    'üêã Una balena ha acquistato 1000 BTC!',
    '‚ö° Lightning Network: transazione da 0.1 BTC in 0.01s',
    'üè¶ Banca centrale annuncia adozione cripto.',
    'üîí Nuovo record di hash globale!',
  ];
  const e = events[Math.floor(Math.random() * events.length)];
  addLog(e, 'info');
}, 15000);

// Boot
buildUpgradeList();
buildMinerList();
recalc();
addLog('üöÄ Bitcoin Miner Pro avviato! Clicca il bottone per iniziare a minare.', 'warn');
addLog('üí° Suggerimento: acquista miners automatici per guadagnare anche mentre sei offline!', 'info');
</script>
</body>
</html>
